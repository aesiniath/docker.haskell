#!/bin/sh

set -x

# Compiler download
rm -r /root/.stack/programs/*/*.tar.xz

# Package downloads
rm -r /root/.stack/indices/Hackage/packages/*

# Remove documentation where present
find /root/.stack -type d -name 'doc' -exec rm -r {} \;
find /root/.stack -type d -name 'man' -exec rm -r {} \;

# Remove caches
rm -r /root/.stack/loaded-snapshot-cache
rm -r /root/.stack/setup-exe-cache
rm -r /root/.stack/build-plan-cache
rm -r /root/.stack/indices/Hackage/00-index.tar

# Nuke from orbit before it escapes and colonizes other planets
rm -r ./.stack-work

exit 0
